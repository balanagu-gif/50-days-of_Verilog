// Simple FSM example: 3 states (IDLE, S1, S2)
module simple_fsm (
    input  wire clk,
    input  wire reset,    
    input  wire in,      
    output reg  [1:0] state
);


    parameter IDLE = 2'b00,
              S1   = 2'b01,
              S2   = 2'b10;

    reg [1:0] next_state;

        always @(posedge clk or posedge reset) begin
        if (reset)
            state <= IDLE;
        else
            state <= next_state;
    end

        always @(*) begin
        case (state)
            IDLE: next_state = in ? S1 : IDLE;
            S1:   next_state = in ? S2 : IDLE;
            S2:   next_state = in ? IDLE : S1;
            default: next_state = IDLE;
        endcase
    end

endmodule
